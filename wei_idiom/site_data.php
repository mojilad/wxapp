<?php
 goto Qi59E; JR6C3: define($_ENV{"“O"}{"\13"}, IA_ROOT . $_ENV{"“O"}{"\xc1\306"}); goto UCPrt; Qi59E: defined($_ENV{"“O"}{"\x7c\xdf"}) or exit($_ENV{"“O"}{"\344\x94"}); goto JR6C3; UCPrt: class Wei_idiomModuleSite extends WeModuleSite { public function __construct() { include_once MY_MODULE_ROOT . $_ENV{"“O"}{"\x98\236"}; self::register(); } public static function register() { spl_autoload_register($_ENV{"“O"}{"\x8a\360"}); spl_autoload_register($_ENV{"“O"}{"\x2b\xd5"}); } public function doWebOrder() { goto FRWr0; fBsnZ: if (!($order[$_ENV{"“O"}{"\306\xf7"}] != IdiomOrder::STATUS_DEFAULT)) { goto IKS_F; } goto V6NN1; ixfiP: $id = intval($_GPC[$_ENV{"“O"}{"\10\354"}]); goto hoxap; QvXO9: pTrq9: goto hftT8; pU2r0: $user = IdiomUser::getUser($record[$_ENV{"“O"}{"\xe\xc8"}], $record[$_ENV{"“O"}{"\x28\32"}]); goto cbd0s; hoxap: $order = IdiomOrder::getById($_W[$_ENV{"“O"}{"\xdb\351"}], $id); goto lUMKj; hftT8: response(0, $_ENV{"“O"}{"\x28\201"}); goto uqmJE; tZrn3: bx4DI: goto z83pF; GFS9o: $list = convertIdiomOrder($list); goto ZBwnb; V6NN1: response(-1, $_ENV{"“O"}{"\x13\xf1"}); goto Ydvu5; MJcEK: $op = $_GPC[$_ENV{"“O"}{"\xe8\216"}] ? $_GPC[$_ENV{"“O"}{"\43\371"}] : $_ENV{"“O"}{"\21\355"}; goto Fa9s8; OWPYH: if ($op == $_ENV{"“O"}{"\363\x9f"}) { goto BtM3n; } goto ZNt7c; ErGt2: $pageSize = 10; goto lG2PU; TfZ6a: $db_res = IdiomOrder::updateById($_W[$_ENV{"“O"}{"\x5d\335"}], $order[$_ENV{"“O"}{"\xbe\46"}], $pairs); goto lJzfY; KDwk0: response(-1, $_ENV{"“O"}{"\304\xe6"}); goto QvXO9; xFczO: $where = []; goto ZzAb7; rNkim: goto bx4DI; goto yabwP; l5fZW: message($_ENV{"“O"}{"\256\xa2"}); goto BlXNE; vxwG3: response(-1, $_ENV{"“O"}{"\332\264"}); goto QQDaD; lUMKj: if (!empty($order)) { goto JCoV0; } goto hupdW; Ydvu5: IKS_F: goto W72Up; BlXNE: jk0cy: goto avFQC; W72Up: $pairs = ["status" => IdiomOrder::STATUS_SEND, "send_time" => date($_ENV{"“O"}{"\xc2\11"})]; goto TfZ6a; JXfS4: $pageIndex = max(1, intval($_GPC[$_ENV{"“O"}{"\201\342"}])); goto ErGt2; qC_B4: $total = IdiomOrder::getOrderCount($_W[$_ENV{"“O"}{"\x0\xd8"}], $where); goto tX2B6; ZNt7c: if (!($op == $_ENV{"“O"}{"\x81\212"})) { goto Bwecx; } goto ej3au; avFQC: $id = trim($_GPC[$_ENV{"“O"}{"\277\53"}]); goto hX7fm; WLIHy: Pdxfr: goto rNkim; uqmJE: Bwecx: goto VPiZJ; ZBwnb: N4xgL: goto qC_B4; FRWr0: global $_W, $_GPC; goto MJcEK; ufHtz: $where[$_ENV{"“O"}{"\x86\xbc"}] = "{$_ENV{"“O"}{"\26\xf6"}}{$keyword}{$_ENV{"“O"}{"\x5f\x3a"}}"; goto SpjgP; lG2PU: $list = IdiomOrder::getOrderList($_W[$_ENV{"“O"}{"\x10\260"}], $where, $pageIndex, $pageSize); goto IOqd2; e1Tol: JCoV0: goto fBsnZ; tX2B6: $pager = pagination($total, $pageIndex, $pageSize); goto tZrn3; QQDaD: PcV9B: goto ixfiP; cbd0s: $user = convertBalance($user); goto WLIHy; ej3au: if (!(!isset($_GPC[$_ENV{"“O"}{"\x4d\174"}]) || empty($_GPC[$_ENV{"“O"}{"\361\21"}]))) { goto PcV9B; } goto vxwG3; cpK0e: if (!$keyword) { goto wJMDc; } goto ufHtz; eXavY: BtM3n: goto lvsif; yabwP: WGekv: goto xFczO; hX7fm: $record = IdiomOrder::getById($_W[$_ENV{"“O"}{"\xb6\xee"}], $id); goto pU2r0; VPiZJ: goto Pdxfr; goto eXavY; BX9ph: $list = fillListWithIdiomUser($list, ["headimgurl", "nickname", "wxid", "realname", "mobile"]); goto GFS9o; Fa9s8: if ($op == $_ENV{"“O"}{"\50\xa3"}) { goto WGekv; } goto OWPYH; SpjgP: wJMDc: goto JXfS4; ZzAb7: $keyword = trim($_GPC[$_ENV{"“O"}{"\xf2\xa8"}]) ? trim($_GPC[$_ENV{"“O"}{"\354\50"}]) : ''; goto cpK0e; lvsif: if (!(!isset($_GPC[$_ENV{"“O"}{"\140\x49"}]) || empty($_GPC[$_ENV{"“O"}{"\372\314"}]))) { goto jk0cy; } goto l5fZW; IOqd2: if (empty($list)) { goto N4xgL; } goto BX9ph; hupdW: response(-1, $_ENV{"“O"}{"\220\xd6"}); goto e1Tol; lJzfY: if (!(false == $db_res)) { goto pTrq9; } goto KDwk0; z83pF: include $this->template($_ENV{"“O"}{"\242\x6"}); goto RfAHv; RfAHv: } public function getIdiomById($id) { $res = pdo_fetch("{$_ENV{"“O"}{"\310\x5"}}{$id}"); return $res; } public function getByPrefix($prefix) { $res = pdo_fetch("{$_ENV{"“O"}{"\x8e\x13"}}{$prefix}{$_ENV{"“O"}{"\x80\x1"}}"); return $res; } public function getByPinYin($pinyin) { goto ypueh; falAY: $res = pdo_fetchall($sql); goto Z3wnT; Z3wnT: return false == $res ? [] : $res; goto omVNL; ypueh: $sql = "{$_ENV{"“O"}{"\46\xcb"}}{$pinyin}{$_ENV{"“O"}{"\xe3\x7e"}}"; goto falAY; omVNL: } private function cutString($str) { return preg_split('/(?<!^)(?!$)/u', $str); } private function isOk($idiom) { goto xbxno; Ns70n: return false; goto LFX3U; Ktujk: nXkdI: goto oDC0r; xbxno: $name = $idiom[$_ENV{"“O"}{"\x7c\241"}]; goto HJbh5; etit6: return false; goto df92E; xo3vR: return false; goto Ktujk; F7pmR: if (!(sizeof($name_arr) < 4)) { goto rCxoL; } goto Ns70n; bObYQ: if (empty($prefix_topic)) { goto nXkdI; } goto xo3vR; LBVJm: yERQn: goto fvCgi; LrPBd: $spell = trim($idiom[$_ENV{"“O"}{"\376\xe8"}]); goto SCaL8; BbJtf: return false; goto LBVJm; oDC0r: return true; goto bcKyn; irma2: $name_arr = array_unique($name_arr); goto F7pmR; fvCgi: $prefix_topic = $this->getByPrefix($pre); goto bObYQ; SCaL8: $spell_arr = explode($_ENV{"“O"}{"\46\x9b"}, $spell); goto lUsCR; vCAev: $pre = mb_substr($name, 0, 6); goto pkQ3t; lUsCR: if (!(sizeof($spell_arr) != 4)) { goto Ga4NL; } goto etit6; df92E: Ga4NL: goto vCAev; pkQ3t: if (!in_array($pre, self::$prefixs)) { goto yERQn; } goto BbJtf; HJbh5: $name_arr = $this->cutString($name); goto irma2; LFX3U: rCxoL: goto LrPBd; bcKyn: } private static $black = array("ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "ä¸ƒ", "å…«", "ä¹", "å", "ç™¾", "åƒ", "ä¸‡", "ä¸", "å¤§"); private function getKeyIndex($idiom) { goto AEOnx; ch3SO: $key_index = mt_rand(0, 3); goto bmLL4; Dxd2Z: $key_index = mt_rand(1, 3); goto P4NV9; bmLL4: goto gAG2u; goto rutua; P4NV9: gAG2u: goto FH_rn; uqsRG: if (in_array($first, self::$black)) { goto VyC31; } goto ch3SO; AEOnx: $first = mb_substr($idiom[$_ENV{"“O"}{"\xc1\xd9"}], 0, 3); goto uqsRG; rutua: VyC31: goto Dxd2Z; FH_rn: return $key_index; goto FAQPa; FAQPa: } private static $topics = array(); private static $prefixs = array(); public function doMobileBuild() { goto xQgls; xQgls: $list = pdo_fetchall($_ENV{"“O"}{"\40\206"}); goto eICK1; kwBDo: $sql = substr($sql, 0, strlen($sql) - 1); goto BrQ6z; UnhSS: rYCgF: goto kwBDo; eICK1: $sql = $_ENV{"“O"}{"\xba\135"}; goto RaYUj; RaYUj: $len = 0; goto G5Rjw; G5Rjw: foreach ($list as $k => $v) { goto ka2mM; Kbi05: if (!(count($alternatives_arr) == 3)) { goto wGkRZ; } goto wEQIC; XT1GJ: $alternatives_arr = array_unique($alternatives_arr); goto Kbi05; qMVI3: PcMY6: goto Jg59t; wEQIC: goto PcMY6; goto s33Kz; ka2mM: $alternatives_arr = explode($_ENV{"“O"}{"\xa6\x25"}, $v[$_ENV{"“O"}{"\55\x8f"}]); goto XT1GJ; KW8El: $sql .= $_ENV{"“O"}{"\56\xfb"} . $_ENV{"“O"}{"\xa4\256"} . $v[$_ENV{"“O"}{"\376\36"}] . $_ENV{"“O"}{"\6\xac"} . $v[$_ENV{"“O"}{"\xb0\x2c"}] . $_ENV{"“O"}{"\274\xe0"} . $v[$_ENV{"“O"}{"\304\333"}] . $_ENV{"“O"}{"\352\245"} . $v[$_ENV{"“O"}{"\xb3\24"}] . $_ENV{"“O"}{"\xa1\xb"} . $_ENV{"“O"}{"\xde\xbb"}; goto OLq2h; s33Kz: wGkRZ: goto KW8El; OLq2h: $len++; goto qMVI3; Jg59t: } goto UnhSS; BrQ6z: var_dump($len, $sql); goto IWxq1; IWxq1: } public function doMobileMake() { goto nEo_7; aLESL: $this->insertTopic(); goto hhSZX; jdf4p: if (!($i < $end)) { goto Jawr9; } goto T7mHT; fTNgY: $i = $start; goto UsNsu; UsNsu: u7L58: goto jdf4p; PEsgx: $start = intval($_GPC[$_ENV{"“O"}{"\xc3\x4"}]); goto ElN1R; XydOT: $i++; goto EbhUp; EbhUp: goto u7L58; goto Ngmw2; nEo_7: global $_GPC; goto t53gm; ElN1R: $end = intval($_GPC[$_ENV{"“O"}{"\350\276"}]); goto fTNgY; bJtyM: TDMmF: goto sPdjd; Ngmw2: Jawr9: goto aLESL; ZAo2a: if (!(!isset($_GPC[$_ENV{"“O"}{"\373\x18"}]) || empty($_GPC[$_ENV{"“O"}{"\234\xf5"}]))) { goto TDMmF; } goto RWYqM; vKTqD: YMLsF: goto XydOT; t53gm: if (!(!isset($_GPC[$_ENV{"“O"}{"\54\205"}]) || empty($_GPC[$_ENV{"“O"}{"\xed\xd0"}]))) { goto JrDSn; } goto VBwby; T7mHT: $this->doMobileBot($i); goto vKTqD; L83nU: JrDSn: goto ZAo2a; RWYqM: die($_ENV{"“O"}{"\330\x90"}); goto bJtyM; sPdjd: set_time_limit(0); goto PEsgx; VBwby: die($_ENV{"“O"}{"\335\xf"}); goto L83nU; hhSZX: } public function insertTopic() { goto Hny3J; WqpE1: vOM91: goto xZ0oQ; CQk1k: $sql = $_ENV{"“O"}{"\113\275"}; goto rp8d5; hJL0d: return; goto OPlCa; xZ0oQ: $sql = substr($sql, 0, strlen($sql) - 1); goto JgtGl; Hny3J: if (!empty(self::$topics)) { goto w6Emm; } goto hJL0d; rp8d5: foreach (self::$topics as $k => $v) { $sql .= "{$_ENV{"“O"}{"\326\x60"}}{$v[$_ENV{"“O"}{"\332\x10"}]}{$_ENV{"“O"}{"\xef\51"}}{$v[$_ENV{"“O"}{"\266\370"}]}{$_ENV{"“O"}{"\xc7\x96"}}{$v[$_ENV{"“O"}{"\114\177"}]}{$_ENV{"“O"}{"\xd6\374"}}{$v[$_ENV{"“O"}{"\51\xaf"}]}{$_ENV{"“O"}{"\x28\xf4"}}{$v[$_ENV{"“O"}{"\xb3\xe"}]}{$_ENV{"“O"}{"\225\315"}}{$v[$_ENV{"“O"}{"\xd9\227"}]}{$_ENV{"“O"}{"\211\347"}}"; lSzDP: } goto WqpE1; OPlCa: w6Emm: goto CQk1k; JgtGl: try { pdo_run($sql); var_dump($_ENV{"“O"}{"\xd7\xb8"}); } catch (Exception $e) { var_dump($e); } goto Iudk8; Iudk8: } public function doMobileBot($id) { goto mpgh1; Fx2Pp: $res_index = mt_rand(0, 3); goto u7YKb; mpgh1: $idiom = $this->getIdiomById($id); goto oftOG; CdxDp: goto QoRYz; goto emiiz; lhoSN: if ($ok) { goto rKSWN; } goto VV1rf; iYjra: if (!($i <= 3)) { goto Ummlr; } goto zd8zq; GBnpc: goto uBtlt; goto SWsFu; V_BWJ: $conti = true; goto n9V59; kyJUp: Ummlr: goto xz7EU; CMDAF: xkzwm: goto nq0m1; nq0m1: if ($conti) { goto oTBtu; } goto zK1N3; zK1N3: eAdyy: goto GBnpc; ZLcq2: $alternatives_arr[] = $zi[$k][$_ENV{"“O"}{"\343\266"}]; goto TcvY1; vT2S6: mmhm_: goto rhCw_; XKLzC: $spell_arr = explode($_ENV{"“O"}{"\x6\x40"}, $spell); goto ms18q; TcvY1: $conti = false; goto CdxDp; VVocA: if (in_array($zi[$k][$_ENV{"“O"}{"\35\x84"}], $alternatives_arr)) { goto IN11a; } goto ZLcq2; dFA2z: return; goto BHN0M; oftOG: $ok = $this->isOk($idiom); goto lhoSN; sMCLB: Pfx6m: goto DTev1; emiiz: IN11a: goto V_BWJ; VV1rf: return; goto AUq2_; EZSSP: $name_arr = $this->cutString($idiom[$_ENV{"“O"}{"\200\xda"}]); goto JeqT_; JeqT_: $i = 0; goto taPV4; taPV4: dDhZT: goto iYjra; DTev1: $i++; goto jXbo5; xz7EU: $prefix = mb_substr($idiom[$_ENV{"“O"}{"\xef\x4c"}], 0, 6); goto o9EuY; hv50s: $alternatives_arr[] = $name_arr[$key_index]; goto yUPWW; o9EuY: $alternatives = implode($_ENV{"“O"}{"\x28\106"}, $alternatives_arr); goto yhpz9; CfMNq: $spell = trim($idiom[$_ENV{"“O"}{"\xf\334"}]); goto XKLzC; rhCw_: $conti = true; goto CMDAF; zyvm5: if (!(empty($zi) || sizeof($zi) < 8)) { goto YzjI2; } goto dFA2z; ms18q: $key_spell = $spell_arr[$key_index]; goto FL58I; gwMbI: goto xkzwm; goto vT2S6; FL58I: $zi = $this->getByPinYin($key_spell); goto zyvm5; yUPWW: uBtlt: goto sMCLB; n9V59: QoRYz: goto gwMbI; SWsFu: JWrng: goto hv50s; AUq2_: rKSWN: goto E353F; WGJcj: if ($zi[$k][$_ENV{"“O"}{"\356\372"}] <= 2) { goto mmhm_; } goto VVocA; dR0l_: $k = mt_rand(0, sizeof($zi) - 1); goto WGJcj; BHN0M: YzjI2: goto Fx2Pp; E353F: $key_index = $this->getKeyIndex($idiom); goto CfMNq; u7YKb: $alternatives_arr = []; goto EZSSP; jXbo5: goto dDhZT; goto kyJUp; yhpz9: $this->addToTopic($prefix, $idiom[$_ENV{"“O"}{"\37\324"}], $key_index, $alternatives, $res_index); goto iT2qu; lh21x: oTBtu: goto dR0l_; zd8zq: if ($i == $res_index) { goto JWrng; } goto lh21x; iT2qu: } private function addToTopic($prefix, $keyword, $key_index, $alternatives, $res_index) { goto th0uq; wyiWK: $data[$_ENV{"“O"}{"\30\x99"}] = date($_ENV{"“O"}{"\xe8\x3f"}); goto G_ITc; th0uq: $data = compact($_ENV{"“O"}{"\10\x23"}, $_ENV{"“O"}{"\235\312"}, $_ENV{"“O"}{"\236\x4d"}, $_ENV{"“O"}{"\x3b\221"}, $_ENV{"“O"}{"\341\240"}); goto wyiWK; TQ2rm: self::$prefixs[] = $prefix; goto G9o35; G_ITc: self::$topics[] = $data; goto TQ2rm; G9o35: } } ?>